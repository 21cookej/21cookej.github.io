<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Run Custom JS</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }

        #iframeContainer {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        #runCustomJSButton {
            display: none;
        }

        #menuButton {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: red;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1000;
            display: none;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        #menu {
            position: fixed;
            bottom: 60px;
            left: 20px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            display: none;
            z-index: 1001;
            overflow: auto;
            width: 30%;
            height: auto;
        }

        .input {
            margin-bottom: 10px;
        }

        input[type="text"] {
            padding: 5px;
            margin-right: 5px;
        }

        .closeButton {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            float: right;
        }

        #run {
            background-color: blue;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        #jsInput {
            width: 100%;
            height: 100px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <button id="runCustomJSButton">Run Custom JS</button>
    <button id="menuButton">Open Menu</button>

    <div id="iframeContainer">
        <iframe id="contentIframe" src="https://infinite-craft.com/" title="Example Website"></iframe>
    </div>

    <div id="menu">
        <button class="closeButton" id="closeMenu">X</button>
        <h3>Custom JavaScript Input</h3>
        <textarea id="jsInput" placeholder="Paste your JavaScript code here"></textarea>
        <button id="runJsButton">Run JavaScript</button>

        <form id="form">
            <h3>Generate Cheat</h3>
            <div class="input">
                <input type="text" name="emoji" value="😀" autocomplete="off" required />
                <input type="text" name="object" placeholder="Text" autocomplete="off" required />
            </div>
            <input type="submit" value="Generate cheat" />
        </form>
        <div class="output">
            <textarea id="output" placeholder="Cheat will be shown here" readonly></textarea>
            <button id="run">Run</button>
        </div>
    </div>

    <!-- Include your JavaScript file directly -->
    <script src="infinite/infinite.js"></script>

    <script>
        const form = document.getElementById('form');
        const output = document.getElementById('output');
        const runButton = document.getElementById('run');
        const runJsButton = document.getElementById('runJsButton');
        const menu = document.getElementById('menu');
        const menuButton = document.getElementById('menuButton');
        const closeMenuButton = document.getElementById('closeMenu');
        const jsInput = document.getElementById('jsInput');

        function safeToString(x) {
            return x.replaceAll('"', '\\"');
        }

        form.addEventListener('submit', (e) => {
            e.preventDefault();

            const name = e.target.object.value;
            const emoji = e.target.emoji.value;

            output.value = `javascript:var name = "${safeToString(name)}"; var emoji = "${safeToString(emoji)}"; var data; if (localStorage.getItem('infinite-craft-data')) { data = JSON.parse(localStorage.getItem('infinite-craft-data')); } else { data = { elements: [{ text: 'Water', emoji: '💧', discovered: false }, { text: 'Fire', emoji: '🔥', discovered: false }, { text: 'Wind', emoji: '🌬️', discovered: false }, { text: 'Earth', emoji: '🌍', discovered: false },], darkMode: false, }; } if (!data.elements.find((x) => x.text === name && x.emoji === emoji)) { data.elements.push({ text: name, emoji: emoji, discovered: false }); localStorage.setItem('infinite-craft-data', JSON.stringify(data)); location.reload(); }`;
        });

        runButton.addEventListener('click', () => {
            const scriptContent = output.value;
            const newScript = document.createElement('script');
            newScript.textContent = scriptContent;
            document.body.appendChild(newScript);
        });

        runJsButton.addEventListener('click', () => {
            const jsCode = jsInput.value;
            try {
                eval(`(function() { ${jsCode} })();`);
            } catch (error) {
                alert('Error executing JavaScript: ' + error);
            }
        });

        menuButton.addEventListener('click', () => {
            menu.style.display = 'block';
        });

        closeMenuButton.addEventListener('click', () => {
            menu.style.display = 'none';
        });
    </script>
</body>
</html>
